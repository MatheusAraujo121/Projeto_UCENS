<main class="cadastro-page">
  <div class="cadastro-container">
    <img src="assets/carp.jpg" class="bg-carpa" alt="carpa" />
    <h2>Adicionar Novo Usuário</h2>

    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">

      <p class="section-label"><em>Dados de Acesso</em></p>
      <div class="form-grid">
        <mat-form-field appearance="fill">
          <mat-label>Nome</mat-label>
          <input matInput formControlName="userName" placeholder="Ex: admin ou joao.silva" required>
          <mat-error *ngIf="userForm.get('userName')?.hasError('required')">
            Nome é obrigatório
          </mat-error>
          <mat-error *ngIf="userForm.get('userName')?.hasError('maxlength')">
            O nome não pode exceder 100 caracteres
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" type="email" placeholder="Ex: email@email.com" required>
          <mat-error *ngIf="userForm.get('email')?.hasError('required')">
            Email é obrigatório
          </mat-error>
          <mat-error *ngIf="userForm.get('email')?.hasError('email')">
            Email inválido
          </mat-error>
           <mat-error *ngIf="userForm.get('email')?.hasError('maxlength')">
            O e-mail não pode exceder 150 caracteres
          </mat-error>
        </mat-form-field>
      </div>

      <p class="section-label"><em>Segurança</em></p>
      <div class="form-grid">
        <mat-form-field appearance="fill">
          <mat-label>Senha</mat-label>
          <input matInput formControlName="senha" type="password" required>
          <mat-error *ngIf="userForm.get('senha')?.hasError('required')">
            Senha é obrigatória
          </mat-error>
          <mat-error *ngIf="userForm.get('senha')?.hasError('minlength')">
            A senha deve ter no mínimo 6 caracteres
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Confirmar Senha</mat-label>
          <input matInput formControlName="confirmarSenha" type="password" required>
          <mat-error *ngIf="userForm.get('confirmarSenha')?.hasError('required')">
            Confirmação de senha é obrigatória
          </mat-error>
          <mat-error *ngIf="userForm.get('confirmarSenha')?.hasError('passwordMismatch')">
            As senhas não conferem
          </mat-error>
        </mat-form-field>
      </div>

      <div class="btns-bottom">
        <button mat-stroked-button class="btn-cancel" type="button" routerLink="/list-users">
          <mat-icon>close</mat-icon>
          <span>Cancelar</span>
        </button>
        <button mat-stroked-button class="btn-submit" type="submit" [disabled]="userForm.invalid || isLoading">
          <mat-icon>radio_button_unchecked</mat-icon>
          <span>Salvar Usuário</span>
        </button>
      </div>
      
    </form>
  </div>
</main>