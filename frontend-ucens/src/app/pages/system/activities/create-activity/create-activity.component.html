<main class="cadastro-page">
  <div class="cadastro-container">
    <img src="assets/carp.jpg" class="bg-carpa" alt="carpa" />
    <h2>Cadastrar Atividade</h2>

    <form [formGroup]="form" (ngSubmit)="efetuarCadastro()">
      <!-- Preview da Imagem -->
      <p class="section-label"><em>Imagem da Atividade</em></p>
      <div class="form-grid full-width preview-container">
        <div class="frame">
          <img
            *ngIf="previewUrl"
            [src]="previewUrl"
            class="image-preview"
            alt="Prévia da atividade"
          />
        </div>
      </div>

      <!-- Botão de Upload -->
      <div class="form-grid full-width">
        <button mat-stroked-button type="button" class="upload-btn" (click)="fileInput.click()">
          <mat-icon>upload</mat-icon>
          Selecionar Imagem
        </button>
        <input
          #fileInput
          type="file"
          accept="image/*"
          (change)="onFileChange($event)"
          hidden
        />
      </div>
      <p class="section-label"><em>Identificação</em></p>
      <div class="form-grid">
        <mat-form-field appearance="fill">
          <mat-label>Código da Atividade</mat-label>
          <input matInput formControlName="codigo" />
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Nome da Atividade</mat-label>
          <input matInput formControlName="nome" />
        </mat-form-field>
      </div>

      <p class="section-label"><em>Detalhes</em></p>
      <div class="form-grid">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Descrição</mat-label>
          <textarea matInput formControlName="descricao"></textarea>
        </mat-form-field>
        <mat-radio-group formControlName="exigePiscina" color="primary">
          <label>Solicita exame de piscina:</label>
          <mat-radio-button [value]="true">Sim</mat-radio-button>
          <mat-radio-button [value]="false">Não</mat-radio-button>
        </mat-radio-group>

        <mat-radio-group formControlName="exigeFisico" color="primary">
          <label>Solicita exame físico:</label>
          <mat-radio-button [value]="true">Sim</mat-radio-button>
          <mat-radio-button [value]="false">Não</mat-radio-button>
        </mat-radio-group>
      </div>

      <p class="section-label"><em>Extras</em></p>
      <div class="form-grid">
        <mat-form-field appearance="fill">
          <mat-label>Categoria</mat-label>
          <mat-select formControlName="categoria">
            <mat-option *ngFor="let categoria of categorias" [value]="categoria">{{ categoria }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Dias Disponíveis</mat-label>
          <mat-select formControlName="diasDisponiveis" multiple>
            <mat-option *ngFor="let dia of diasSemana" [value]="dia">{{ dia }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Horário Sugerido</mat-label>
          <input matInput type="time" formControlName="horarioSugerido" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Idade Mínima</mat-label>
          <input matInput type="number" formControlName="idadeMinima" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Idade Máxima</mat-label>
          <input matInput type="number" formControlName="idadeMaxima" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Limite de Participantes</mat-label>
          <input matInput type="number" formControlName="limiteParticipantes" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Local</mat-label>
          <mat-select formControlName="local" multiple>
            <mat-option *ngFor="let sede of sedes" [value]="sede">{{ sede }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Professor Responsável</mat-label>
          <input matInput formControlName="professorResponsavel" placeholder="Nome do professor" />
        </mat-form-field>
      </div>

      <div class="btns-bottom">
        <button mat-stroked-button class="btn-cancel" routerLink="/list-activities">
          <mat-icon>close</mat-icon>
          <span>Cancelar</span>
        </button>
        <button mat-stroked-button class="btn-submit" type="submit">
          <mat-icon>radio_button_unchecked</mat-icon>
          <span>Cadastrar atividade</span>
        </button>
      </div>
    </form>
  </div>
</main>